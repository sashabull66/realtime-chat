{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/chat-realtime/src/components/Chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { Button, Container, Grid, TextField } from \"@mui/material\";\nimport { Context } from \"../index\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport Loader from \"./Loader\";\nimport firebase from \"firebase/compat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = () => {\n  _s();\n\n  const {\n    auth,\n    firestore\n  } = useContext(Context);\n  const [user] = useAuthState(auth);\n  const [value, setValue] = useState('');\n  const [messages, loading] = useCollectionData(firestore.collection('messages').orderBy('createdAt'));\n\n  const sendMessage = async () => {\n    if (value.trim().length === 0) return;\n    firestore.collection('messages').add({\n      uid: user.uid,\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      text: value,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    setValue('');\n  };\n\n  return loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      style: {\n        height: window.innerHeight - 60,\n        marginTop: 10\n      },\n      justifyContent: 'center',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '80%',\n          height: '60%',\n          border: '2px solid gray',\n          overflowY: 'auto'\n        },\n        children: messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: 'column',\n        alignItems: 'flex-end',\n        style: {\n          width: '80%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          value: value,\n          onChange: e => setValue(e.target.value),\n          variant: 'outlined',\n          style: {\n            marginBottom: 3\n          },\n          fullWidth: true,\n          maxRows: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: 'outlined',\n          onClick: sendMessage,\n          children: \"Send message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Chat, \"AOQrotRfaVlHPIv0+erwZr04/qs=\", false, function () {\n  return [useAuthState, useCollectionData];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/user/Рабочий стол/chat-realtime/src/components/Chat.js"],"names":["React","useContext","useState","Button","Container","Grid","TextField","Context","useAuthState","useCollectionData","Loader","firebase","Chat","auth","firestore","user","value","setValue","messages","loading","collection","orderBy","sendMessage","trim","length","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","height","window","innerHeight","marginTop","width","border","overflowY","map","message","e","target","marginBottom"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react';\nimport {Button, Container, Grid, TextField} from \"@mui/material\";\nimport {Context} from \"../index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\nimport Loader from \"./Loader\";\nimport firebase from \"firebase/compat\";\n\nconst Chat = () => {\n    const {auth, firestore} = useContext(Context);\n    const [user] = useAuthState(auth)\n    const [value, setValue] = useState('')\n    const [messages, loading] = useCollectionData(\n        firestore.collection('messages').orderBy('createdAt')\n    )\n\n    const sendMessage = async () => {\n        if (value.trim().length === 0) return\n        firestore.collection('messages').add({\n            uid: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n            text: value,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n        })\n        setValue('')\n    }\n    return (\n        loading ?\n            <Loader/>\n            :\n            <Container>\n                <Grid container style={{height: window.innerHeight - 60, marginTop: 10}} justifyContent={'center'}>\n                    <div style={{width: '80%', height: '60%', border: '2px solid gray', overflowY: 'auto'}}>\n                        {messages.map(message=>\n                            <div>\n                                <Grid container>\n\n                                </Grid>\n                            </div>\n                        )}\n                    </div>\n                    <Grid container direction={'column'} alignItems={'flex-end'} style={{width: '80%'}}>\n                        <TextField value={value} onChange={e => setValue(e.target.value)} variant={'outlined'}\n                                   style={{marginBottom: 3}} fullWidth maxRows={2}/>\n                        <Button variant={'outlined'} onClick={sendMessage}>Send message</Button>\n                    </Grid>\n                </Grid>\n            </Container>\n    );\n};\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}